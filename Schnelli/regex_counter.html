<!DOCTYPE html>
<html>
<head>
<body>
    <input type="file" id="fileinput">
    <script>
        document.getElementById('fileinput').addEventListener('change', readSingleFile, false);

        function readSingleFile(evt) {
          var f = evt.target.files[0];
          if (f) {
            var r = new FileReader();
            r.onload = function(e) { 
              var contents = e.target.result;
              console.log(contents.length);

              var reg = /\n\*/g;
              var result;
              var numMatches = 0;
              while((result = reg.exec(contents)) !== null) {
                  // doSomethingWith(result);
                  ++numMatches;
              }
              console.log(numMatches);
            }
            r.readAsText(f);
          } else {
            alert("Failed to load file");
          }
        }
    </script>

</body>
</html>
